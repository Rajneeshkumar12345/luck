<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Datepicker JS -->
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Datepicker CSS -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <title>Quiz Result</title>
    <style>
        .btn {
            height: 40px;
            background-color: #61dafb;
            font-weight: 500;
        }

        .mainDivss {
            background-color: white;
            display: flex;
            width: 74%;
            justify-content: center;
            margin: -20px auto 0px auto;
            padding: 50px 10px 10px 10px;
            overflow: hidden;
        }

        .quizName {
            color: #222224;
            font: normal 10pt verdana;
            font-weight: bold;
        }

        .Bodys {
            background-color: black;
        }

        .mainDiv {
            display: flex;
            width: 74%;
            justify-content: center;
            margin: 0 auto;

        }

        .navElement ul {
            list-style-type: none;
            padding: 15px 0px 15px 0px;
            background-color: #bcd037;
            display: flex;
            justify-content: space-around;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
        }

        .navElement ul li {
            font-weight: 400;
            font-size: 18px;
            margin-right: 10px;
            padding: 0;
            margin: 0;
            color: black;
            list-style: none;
        }

        .navElement ul li a {
            text-decoration: none;
            color: black;
        }

        .navElement ul li a:hover {
            text-decoration: underline;
        }

        .mainDivs {
            width: 74%;
            justify-content: center;
            margin: 1rem auto;


        }

        .navElementBottoms ul {
            display: flex;
            background-color: #191919;

        }

        .navElementBottoms ul li {
            color: #ffffff;
            text-align: left;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 12px;
            padding: 15px;
            float: left;
            padding-right: 50px;
            list-style: none;
        }

        .navElementBottoms ul li a {
            text-decoration: none;
            color: #ffffff;
        }

        .navElementBottoms ul li a:hover {
            text-decoration: underline;
        }

        /* Second Part CSS */
        .container {
            color: white;
        }
    </style>
</head>

<body class="Bodys">
    <div class="mainDiv">
        <div class="mains">
            <img src="/images/banner.jpg" alt="banner" width="1000" height="200">
            <div class="navElement">
                <ul>
                    <li><a href="/index.html">HOME</a></li>
                    <li><a href="/register.html">REGISTER</a></li>
                    <li><a href="/about.html">ABOUT</a></li>
                    <li><a href="/result.html">QUIZ RESULT</a></li>
                    <li><a href="/contact-us.html">CONTACT</a></li>
                    <li><a href="/login.html">LOGIN</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="mainDivss">
        <div class="namess">
            <div class="row">
                <div class="col-md-7 mx-auto mb-5">
                    <div class="row" style="display: flex;justify-content: center; align-items: center;">
                        <div class="col-md-4" style="font-weight: 500;"> Please select date:</div>
                        <div class="col-md-4"> <input id="datepicker" width="276" class="form-control"
                                placeholder="Select date" /></div>
                        <div class="col-md-4"> <button id="submitBtn" class="btn">Submit</button></div>
                    </div>


                </div>
            </div>

            <div class="row" id="quizList"></div>
        </div>

    </div>

    <script>
        // Load quizzes from JSON file
        fetch('data/quizzes.json')
            .then(response => response.json())
            .then(data => {
                displayQuizzes(data); // Display all quizzes initially
            })
            .catch(error => console.error('Error loading quizzes:', error));

        // Datepicker initialization
        $('#datepicker').datepicker({
            format: 'yyyy-mm-dd',
            autoclose: true,
            todayHighlight: true,
            uiLibrary: 'bootstrap4'
        });

        // Function to display quizzes based on provided data
        function displayQuizzes(data) {
            const quizList = document.getElementById('quizList');
            quizList.innerHTML = ''; // Clear previous content

            data.forEach(quiz => {
                const colDiv = document.createElement('div');
                colDiv.classList.add('col-md-4');
                const quizContent = `
              <p class="quizName">${quiz.name}</p>
              <div class="row border m-0">
                <div class="col-md-3">${quiz.time ? quiz.time : 'N/A'}</div>
                <div class="col-md-2">${quiz.serialNo}</div>
                <div class="col-md-7">${quiz.detail}</div>
              </div>
            `;
                colDiv.innerHTML = quizContent;
                quizList.appendChild(colDiv);
            });
        }

        // Filter quizzes based on selected date when the submit button is clicked
        document.getElementById('submitBtn').addEventListener('click', function () {
            const selectedDate = $('#datepicker').datepicker('getDate');
            if (selectedDate) {
                // Convert selected date to start of the day (midnight)
                const startOfDay = new Date(selectedDate.getFullYear(), selectedDate.getMonth(), selectedDate.getDate());
                const endOfDay = new Date(startOfDay.getTime() + 24 * 60 * 60 * 1000 - 1); // End of the day (just before the next day)

                fetch('data/quizzes.json')
                    .then(response => response.json())
                    .then(data => {
                        const filteredQuizzes = data.filter(quiz => {
                            const quizDate = new Date(quiz.date);
                            return quizDate >= startOfDay && quizDate <= endOfDay;
                        });
                        console.log(filteredQuizzes, "data");
                        if (filteredQuizzes.length > 0) {
                            displayQuizzes(filteredQuizzes); // Display filtered quizzes
                        } else {
                            alert('No quizzes found for the selected date.');
                        }
                    })
                    .catch(error => console.error('Error loading quizzes:', error));
            } else {
                // If no date selected, display all quizzes
                fetch('data/quizzes.json')
                    .then(response => response.json())
                    .then(data => {
                        displayQuizzes(data); // Display all quizzes
                    })
                    .catch(error => console.error('Error loading quizzes:', error));
            }
        });

    </script>




    <div class="mainDivs">
        <div class="navElementBottoms mt-3">
            <ul>
                <li><a href="/index.html">HOME</a></li>
                <li><a href="/register.html">REGISTER</a></li>
                <li><a href="/about.html">ABOUT</a></li>
                <li><a href="/result.html">QUIZ RESULT</a></li>
                <li><a href="/contact-us.html">CONTACT</a></li>
                <li><a href="/login.html">LOGIN</a></li>
            </ul>
        </div>
    </div>
</body>

</html>