<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- Datepicker JS -->
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Datepicker CSS -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <title>Quiz Result</title>
    <style>
        .btn {
            height: 40px;
            background-color: #61dafb;
            font-weight: 500;
        }

        .mainDivss {
            background-color: white;
            /* display: flex;
            width: 74%;
            justify-content: center; */
            /* margin: -20px auto 0px auto; */
            padding: 50px 10px 10px 10px;
            overflow: hidden;
        }

        .quizName {
            color: #222224;
            font: normal 10pt verdana;
            font-weight: bold;
        }

        .Bodys {
            background-color: black;
        }

        .mainDiv {
            /* display: flex;
            width: 74%;
            justify-content: center; */
            margin: 0 auto;

        }

        .navElement ul {
            list-style-type: none;
            padding: 15px 0px 15px 0px;
            background-color: #bcd037;
            display: flex;
            justify-content: space-around;
            border-bottom-left-radius: 5px;
            border-bottom-right-radius: 5px;
        }

        .navElement ul li {
            font-weight: 400;
            font-size: 18px;
            margin-right: 10px;
            padding: 0;
            margin: 0;
            color: black;
            list-style: none;
        }

        .navElement ul li a {
            text-decoration: none;
            color: black;
        }

        .navElement ul li a:hover {
            text-decoration: underline;
        }

        .mainDivs {
            /* width: 74%;
            justify-content: center; */
            margin: 1rem auto;


        }

        .navElementBottoms ul {
            display: flex;
            background-color: #191919;

        }

        .navElementBottoms ul li {
            color: #ffffff;
            text-align: left;
            font-family: Arial, Helvetica, sans-serif;
            font-size: 12px;
            padding: 15px;
            float: left;
            padding-right: 50px;
            list-style: none;
        }

        .navElementBottoms ul li a {
            text-decoration: none;
            color: #ffffff;
        }

        .navElementBottoms ul li a:hover {
            text-decoration: underline;
        }

        /* Second Part CSS */
        .container {
            color: white;
        }

        .gifs {
            position: relative;
        }

        .gifs::after {
            content: "";
            position: absolute;
            top: 20%;
            right: -45px;
            transform: translateY(-50%);
            background-image: url(/images/new_icon.gif);
            width: 40px;
            height: 20px;
            z-index: 1;
        }

        @media (max-width: 767px) {
            .mainDiv {
                width: 100%;
                display: block;
            }

            .bottoms {
                width: 100%;
            }

            .imageClass img {
                max-width: 100%;
            }

            .mains img {
                max-width: 100%;
            }

            .navElement ul {
                list-style-type: none;
                padding: 20px 0px 15px 0px;
                background-color: #bcd037;
                display: flex;
                border-bottom-left-radius: 5px;
                border-bottom-right-radius: 5px;
                flex-direction: column;
                justify-content: center;
            }

            .navElement ul li {
                display: flex;
                justify-content: center;
                margin: 5px auto;
            }

            .mainDivs {
                position: relative;
                width: 100%;
                background-color: #444145;
            }

            .mainDivs ul {
                display: flex;
                /* flex-wrap: nowrap; */
                justify-content: center;
                flex-direction: column;
            }

            .mainDivs ul li {
                display: flex;
                justify-content: center;
                margin-bottom: 10px;
                margin-top: 10px;
            }

            .navElementBottoms ul li {
                font-size: 12px;
                padding: 0px;
                float: left;
                padding-right: 10px;
                list-style: none;
            }

            .mainAbou {
                margin: 15px;
                text-align: left;
            }

            .mainDivss {
                width: 100%;
                background-color: white;
                display: flex;
                justify-content: flex-start;
                margin: -20px auto 0px auto;
                padding: 50px 10px 10px 10px;
                overflow: scroll
            }

            .form-control {
                width: 300px !important;
            }

            .btn {
                margin-top: 20px;
                text-align: center;
            }

            .table-bordered tr th {
                padding: 0;
                margin: 0;
                font-size: 10px;
                font-weight: 500;
            }

            .table-bordered td {
                color: #222224;
                /* font: normal 9pt verdana; */
                font-family: 0;
                font-size: 10px !important;
                font-weight: 400 !important;
                line-height: normal;
                padding: 0;
                margin: 0;
            }
        }

        .table-bordered td {
            color: #222224;
            /* font: normal 9pt verdana; */
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            font-size: 14px;
            font-weight: 500;
            line-height: normal;
        }

        .table-bordered td:nth-child(2),
        .table-bordered td:nth-child(4),
        .table-bordered td:nth-child(6),
        #quizTable thead .hii,
        #quizTable thead th:nth-child(4),
        #quizTable thead th:nth-child(6) {
            border-right: 1px solid transparent !important;
        }
    </style>
</head>

<body class="Bodys">
    <div class="mainDiv">
        <div class="mains">
            <img src="/images/HomeBanner.png" alt="banner" height="200" width="100%">
            <div class="navElement">
                <ul>
                    <li><a href="/index.html">HOME</a></li>
                    <li><a href="/register.html">REGISTER</a></li>
                    <li><a href="/about.html">ABOUT</a></li>
                    <li><a href="/result.html">QUIZ RESULT</a></li>
                    <li><a href="/contact-us.html" class="gifs">CONTACT</a></li>
                    <li><a href="/login.html">LOGIN</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="mainDivss">
        <div class="namess">
            <div class="row">
                <div class="col-md-7 mx-auto mb-5">
                    <div class="row" style="display: flex;justify-content: center; align-items: center;">
                        <div class="col-md-4" style="font-weight: 500;"> Please select date:</div>
                        <div class="col-md-4"> <input id="datepicker" width="276" class="form-control"
                                placeholder="Select date" /></div>
                        <div class="col-md-4"> <button id="submitBtn" class="btn">Submit</button></div>
                    </div>


                </div>
            </div>

            <div id="quizTableContainer" class=" mt-3">
                <div class="table-responsive">
                    <table id="quizTable" class="table table-bordered">
                        <thead>
                            <tr>
                                <th colspan="3" class="text-center">Fun Quiz</th>
                                <th colspan="2" class="text-center">Wonder Quiz</th>
                                <th colspan="2" class="text-center">Lucky Quiz</th>
                            </tr>
                            <tr>
                                <th>Time</th>
                                <th class="hii">Title NO.</th>
                                <th class="text-center">Details</th>
                                <th>Title NO.</th>
                                <th class="text-center">Details</th>
                                <th>Title NO.</th>
                                <th class="text-center">Details</th>
                            </tr>
                        </thead>
                        <tbody id="quizTableBody">
                            <!-- Quiz details will be inserted here dynamically -->
                        </tbody>
                    </table>

                </div>

            </div>
        </div>


    </div>
    <script>

        fetch('data/quizzes.json')
            .then(response => response.json())
            .then(data => {
                displayQuizzesInTable(data);
            })
            .catch(error => console.error('Error loading quizzes:', error));


        $('#datepicker').datepicker({
            format: 'yyyy-mm-dd',
            autoclose: true,
            todayHighlight: true,
            uiLibrary: 'bootstrap4'
        });


        function displayQuizzesInTable(data) {
            const quizTableBody = document.getElementById('quizTableBody');
            quizTableBody.innerHTML = '';


            let funQuizRowIndex = 0;
            let wonderQuizRowIndex = 0;
            let luckyQuizRowIndex = 0;


            data.forEach(quiz => {

                let rowIndex;
                if (quiz.name === 'Fun Quiz') {
                    rowIndex = funQuizRowIndex++;
                } else if (quiz.name === 'Wonder Quiz') {
                    rowIndex = wonderQuizRowIndex++;
                } else if (quiz.name === 'Lucky Quiz') {
                    rowIndex = luckyQuizRowIndex++;
                }


                let row = quizTableBody.querySelector(`tr[data-index="${rowIndex}"]`);
                if (!row) {
                    row = document.createElement('tr');
                    row.setAttribute('data-index', rowIndex);
                    quizTableBody.appendChild(row);
                }


                const timeCell = document.createElement('td');
                const titleNoCell = document.createElement('td');
                const detailCell = document.createElement('td');


                timeCell.textContent = quiz.time ? quiz.time : '';
                titleNoCell.textContent = quiz.serialNo;
                detailCell.textContent = quiz.detail;


                if (quiz.name === 'Fun Quiz') {
                    row.appendChild(timeCell);
                    row.appendChild(titleNoCell);
                    row.appendChild(detailCell);
                } else if (quiz.name === 'Wonder Quiz') {
                    row.appendChild(titleNoCell);
                    row.appendChild(detailCell);
                } else if (quiz.name === 'Lucky Quiz') {
                    row.appendChild(titleNoCell);
                    row.appendChild(detailCell);
                }
            });
        }


        $(document).ready(function () {
            const currentDate = new Date();
            const formattedDate = currentDate.getFullYear() + '-' + ('0' + (currentDate.getMonth() + 1)).slice(-2) + '-' + ('0' + currentDate.getDate()).slice(-2);
            $('#datepicker').datepicker('setDate', formattedDate);
            filterQuizzes(currentDate);
        });


        document.getElementById('submitBtn').addEventListener('click', function () {
            const selectedDate = $('#datepicker').datepicker('getDate');
            if (selectedDate) {
                filterQuizzes(selectedDate);
            } else {

                const currentDate = new Date();
                filterQuizzes(currentDate);
                $('#datepicker').datepicker('setDate', currentDate);
            }
        });


        function filterQuizzes(selectedDate) {

            const startOfDay = new Date(selectedDate.getFullYear(), selectedDate.getMonth(), selectedDate.getDate());
            const endOfDay = new Date(startOfDay.getTime() + 24 * 60 * 60 * 1000 - 1);

            fetch('data/quizzes.json')
                .then(response => response.json())
                .then(data => {
                    const filteredQuizzes = data.filter(quiz => {
                        const quizDate = new Date(quiz.date);
                        return quizDate >= startOfDay && quizDate <= endOfDay;
                    });
                    if (filteredQuizzes.length > 0) {
                        displayQuizzesInTable(filteredQuizzes);
                    } else {
                        displayQuizzesInTable([]);

                    }
                })
                .catch(error => console.error('Error loading quizzes:', error));
        }

    </script>



    <div class="mainDivs">
        <div class="navElementBottoms mt-3">
            <ul>
                <li><a href="/index.html">HOME</a></li>
                <li><a href="/register.html">REGISTER</a></li>
                <li><a href="/about.html">ABOUT</a></li>
                <li><a href="/result.html">QUIZ RESULT</a></li>
                <li><a href="/contact-us.html">CONTACT</a></li>
                <li><a href="/login.html">LOGIN</a></li>
            </ul>
        </div>
    </div>
</body>

</html>